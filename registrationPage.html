<!DOCTYPE html>
<html lang="en">
<head>


	<style>
	.container{
		display: flex;
		justify-content: center;
		align-items: center;
		min-height: 100%;  /* Fallback for browsers do NOT support vh unit */
		min-height: 100vh;
		opacity: 0.9;
		padding: 5em inherit;
	}




	body {
	}
	</style>
	<title>Registration</title>

	<meta charset="utf-8">

	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<script
  src="https://code.jquery.com/jquery-3.3.1.js"
  integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
  crossorigin="anonymous"></script>


	<script
  src="https://code.jquery.com/ui/1.12.0/jquery-ui.js"
  integrity="sha256-0YPKAwZP7Mp3ALMRVB2i8GXeEndvCq3eSl/WsAl1Ryk="
  crossorigin="anonymous"></script>
	<script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
	<script>
/*
		$( function() {
    var availableTags = [
      "ActionScript",
      "AppleScript",
      "Asp",
      "BASIC",
      "C",
      "C++",
      "Clojure",
      "COBOL",
      "ColdFusion",
      "Erlang",
      "Fortran",
      "Groovy",
      "Haskell",
      "Java",
      "JavaScript",
      "Lisp",
      "Perl",
      "PHP",
      "Python",
      "Ruby",
      "Scala",
      "Scheme"
    ];
    $( "#major" ).autocomplete({
      source: availableTags
    });
  } );
  */
	
	$(document).ready(function(){
		 $("#number").mask('(000) 000-0000');
		 $("#dob").mask('00-00-0000');

		 $("#apt").keypress(function (e) {
     //if the letter is not digit then display error and don't type anything
     if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
        //do nothing 
    }
   });

		 $("#zipcode").keypress(function (e) {
     //if the letter is not digit then display error and don't type anything
     if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57)) {
        //do nothing 
    }
   });
                      /*

                      {
			         "email": "stephenoakala@gmail.com",
			         "password": "281330800fB",
			         "first_name": "Stephen",
			         "last_name":"Okala",
			         "university":"Georgia Tech",
			         "phone_numnber":"571-344-9998",
			          "state": "VA",
			          "street": "hood avenue",
			          "city": "Chantilly",
			          "apt": "115",
			         "date_of_birth":"1/27/1993",
			         "major":" "Computer Science",
			         "year":1,
			         "description":"realest of the real"
        			}
                       */
			
			$("#next").click(function(){


				var fname = $("#fname").val();
				var lname = $("#lname").val();
				var number = $("#number").val();
				var dob = $("#dob").val();
                var university= "UGA";
				var email = $("#email").val();
				var state = $("#state").val();
				var city = $("#city").val();
				var street = $("#street").val();
				var apt= $("#apt").val();
				var zipcode= $("#zipcode").val();

				var major = $("#major").val();
                var password= " ";
                var description = " ";
				var grade = $('input[name=optradio]:checked').val();
                             if(grade=="Freshman"){
                             grade=1;
                             }else if(grade == "Sophmore"){
                             grade=2;
                             }else if(grade == "Junior"){
                             grade=3;
                             }else if(grade == "Senior"){
                             grade=4;
                             }else if(grade== "Victory Lap"){
                             grade=5;
                             }else{
                             	grade=null;
                             }
				var id = $("#customFile");
				console.log(id[0].files[0]);
				var file_data = id[0].files[0];
				var form_data = new FormData();
				form_data.append("file", file_data);
				var registrationInfo = {
					 first_name: fname,
					 last_name: lname,
					 phone_number: number,
                     university: university,
					 date_of_birth: dob,
					 email: email,
					 major:major,
					 year:grade,
                     password: password,
                     description: description,
                     state:state,
                     city:city,
                     street: street,
                     apt:apt,
                     zipcode:zipcode
				 }

				 var ajaxFunction= function (){
						 return $.ajax({
						type: 'POST',
						contentType: "application/json",
						url: 'https://uzo-web-app.herokuapp.com/insert_student',
					   data:JSON.stringify(registrationInfo)
						}).done(function(data) {
		                    var result= JSON.parse(data);
		      
					    sessionStorage.setItem("student_id",result.student_id);

						});
				}

				var documentUpload= function (){
						 return $.ajax({
						type: 'POST',
				        enctype: 'multipart/form-data',
				        processData: false,  // Important!
				        contentType: false,
				        cache: false,
						url: 'https://uzo-web-app.herokuapp.com/upload_student_resource',
					   data:form_data,
						}).done(function(data) {
		                    var result= JSON.parse(data);



						});
				}

        		//Need to change this when the other adress stuff is put in
				if(!fname || !lname  ||!number  || !dob  || !email  || !major || !grade || !id[0].files[0] || !state || !city || !street || !zipcode){
						alert("You must fill in required fields!");
					}
				else{
					$.when(ajaxFunction()).done(function(a1){
						form_data.append("student_id", parseInt(sessionStorage.getItem("student_id")));
						console.log(sessionStorage.getItem("student_id"));

						var settings = {
						  "url": "https://uzo-web-app.herokuapp.com/upload_student_resource",
						  "method": "POST",
						  "processData": false,
						  "contentType": false,
						  "mimeType": "multipart/form-data",
						  "data": form_data,
						  	   error: function (e) {

				                $("#result").text(e.responseText);
				                console.log("ERROR : ", e);


				            }
						}

						$.ajax(settings).done(function (response) {
						  console.log(response);
						  window.location.replace("registrationPage2.html")
						});

						});

				$("#next").prop("disabled",false);
			}
			});
		});
	</script>
</head>

<body>
	<div class="jumbotron">
		<h1 align="center">Registration</h1>
		<p align="center">Please fill out this form correctly.</p>
	</div>
	<div class="progress">
		<div class="progress-bar" role="progressbar" style="width: 33%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
	</div>
	<div id="login-overlay" class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<div class="panel-title text-center">
					<h1 class="title">Step 1: Basic Information</h1>
				</div>
			</div>
			<div class="modal-body">
							<form id="registerForm" method="POST">
								<div class="form-group">
									<div class="col-md-6">
										<label for="name">First Name</label>
										<div class="input-group">
											<input type="text" class="form-control" name="fname" id="fname"  placeholder="As Shown On Driver License"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<br>
										<label for="number" >Phone Number</label>
										<div class="input-group">
											<input type="text" class="form-control" name="number" id="number" placeholder="Enter Phone Number"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<br>
										<label for="number" >Apt</label>
										<div class="input-group">
											<input type="text" class="form-control" name="number" id="apt" placeholder="Enter Apartment Number"/>
											<span class="input-group-addon"></span></span>
										</div>
										<br>
										
										<label for="state">State</label>
										<div >
											<select class="form-control" id="state" name="state">
												<option value="">N/A</option>
												<option value="AK">Alaska</option>
												<option value="AL">Alabama</option>
												<option value="AR">Arkansas</option>
												<option value="AZ">Arizona</option>
												<option value="CA">California</option>
												<option value="CO">Colorado</option>
												<option value="CT">Connecticut</option>
												<option value="DC">District of Columbia</option>
												<option value="DE">Delaware</option>
												<option value="FL">Florida</option>
												<option value="GA">Georgia</option>
												<option value="HI">Hawaii</option>
												<option value="IA">Iowa</option>
												<option value="ID">Idaho</option>
												<option value="IL">Illinois</option>
												<option value="IN">Indiana</option>
												<option value="KS">Kansas</option>
												<option value="KY">Kentucky</option>
												<option value="LA">Louisiana</option>
												<option value="MA">Massachusetts</option>
												<option value="MD">Maryland</option>
												<option value="ME">Maine</option>
												<option value="MI">Michigan</option>
												<option value="MN">Minnesota</option>
												<option value="MO">Missouri</option>
												<option value="MS">Mississippi</option>
												<option value="MT">Montana</option>
												<option value="NC">North Carolina</option>
												<option value="ND">North Dakota</option>
												<option value="NE">Nebraska</option>
												<option value="NH">New Hampshire</option>
												<option value="NJ">New Jersey</option>
												<option value="NM">New Mexico</option>
												<option value="NV">Nevada</option>
												<option value="NY">New York</option>
												<option value="OH">Ohio</option>
												<option value="OK">Oklahoma</option>
												<option value="OR">Oregon</option>
												<option value="PA">Pennsylvania</option>
												<option value="PR">Puerto Rico</option>
												<option value="RI">Rhode Island</option>
												<option value="SC">South Carolina</option>
												<option value="SD">South Dakota</option>
												<option value="TN">Tennessee</option>
												<option value="TX">Texas</option>
												<option value="UT">Utah</option>
												<option value="VA">Virginia</option>
												<option value="VT">Vermont</option>
												<option value="WA">Washington</option>
												<option value="WI">Wisconsin</option>
												<option value="WV">West Virginia</option>
												<option value="WY">Wyoming</option>
											</select>
										</div>

										<br>
										<label for="number" >Date of Birth</label>
										<div class="input-group">
											<input type="text" class="form-control" name="dob" id="dob" placeholder="MM-DD-YYYY"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<hr>
									</div>
								</div>

								<div class="form-group">
									<div class="col-md-6">
										<label for="name">Last Name</label>
										<div class="input-group">
											<input type="text" class="form-control" name="lname" id="lname"  placeholder="As Shown On Driver License"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<br>
										<label for="name" >Street</label>
										<div class="input-group">
											<input type="text" class="form-control" name="street" id="street" placeholder="Enter The Street"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<br>
										<label for="name" >City</label>
										<div class="input-group">
											<input type="text" class="form-control" name= "city" id="city" placeholder="Enter The City"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<br>
										<label for="number" >Zipcode</label>
										<div class="input-group">
											<input type="text" class="form-control" name="zipcode" id="zipcode" placeholder="Enter The Zipcode"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<br>
										<label for="name">Email Address</label>
										<div class="input-group">
											<input type="text" class="form-control" name="email" id="email" placeholder="Enter Email Address"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
										<hr>
									</div>
								</div>

								<hr>

								<div class="form-group">
									<div class="col-md-12">
										<label for="number" >Major</label>
										<div class="input-group">
											<input type="text" class="form-control" name="major" id="major" placeholder="Enter Major"/>
											<span class="input-group-addon"><span class="glyphicon glyphicon-asterisk"></span></span>
										</div>
									</div>
								</div>

								<div class="form-group">
									<div class="col-md-12">
										<label for="grade">Grade</label>
										<div class="radio">
											<label><input type="radio" name="optradio" value="Freshman">Freshman</label>
										</div>
										<div class="radio">
											<label><input type="radio" name="optradio" value="Sophmore">Sophmore</label>
										</div>
										<div class="radio">
											<label><input type="radio" name="optradio" value="Junior">Junior</label>
										</div>
										<div class="radio">
											<label><input type="radio" name="optradio" value="Senior">Senior</label>
										</div>
										<div class="radio">
											<label><input type="radio" name="optradio" value="Victory Lap">Victory Lap</label>
										</div>

										<br>
									</div>
								</div>

								<br>


								<div class="custom-file">
									<div class="col-md-12">
										<h5 align="center">Please provide proof that you are a  student by uploading a photo of the front of your college ID</h5>
										<input type="file" class="custom-file-input" id="customFile">

									</div>

								</div>
								<br>

								<div class="form-group ">
									<div class="input-group-addon">
										<button type="button" class="btn btn-success pull-right" id="next">Next</button>
									</div>

								</div>
							</form>



			</div>
		</div>
	</div>


</body>
</html>
